package sms

import (
	"bytes"
	"testing"
)

func TestEncodeDeliver(t *testing.T) {

	bytedata := []byte{
		0x40, 0x04, 0x80, 0x21, 0x43, 0x00, 0x08, 0x11, 0x30, 0x22, 0x41, 0x52, 0x04, 0x63, 0x8a, 0x05,
		0x00, 0x03, 0x87, 0x02, 0x01, 0x75, 0x59, 0x5b, 0x88, 0x96, 0xfb, 0x30, 0x6e, 0x30, 0x4a, 0x77,
		0xe5, 0x30, 0x89, 0x30, 0x5b, 0x00, 0x0a, 0x00, 0x20, 0x30, 0x00, 0x00, 0x0a, 0x00, 0x30, 0x00,
		0x33, 0x00, 0x2f, 0x00, 0x32, 0x00, 0x32, 0x00, 0x20, 0x00, 0x31, 0x00, 0x34, 0x00, 0x3a, 0x00,
		0x32, 0x00, 0x35, 0x00, 0x3a, 0x00, 0x32, 0x00, 0x37, 0x00, 0x0a, 0x00, 0x54, 0x00, 0x45, 0x00,
		0x4c, 0x00, 0x3a, 0x00, 0x30, 0x00, 0x39, 0x00, 0x30, 0x00, 0x31, 0x00, 0x32, 0x00, 0x33, 0x00,
		0x34, 0x00, 0x35, 0x00, 0x36, 0x00, 0x37, 0x00, 0x38, 0x00, 0x0a, 0x30, 0x00, 0x00, 0x0a, 0x75,
		0x59, 0x5b, 0x88, 0x75, 0x6a, 0x96, 0xfb, 0x8a, 0x71, 0x00, 0x20, 0x4f, 0x1d, 0x8a, 0x00, 0x30,
		0x42, 0x30, 0x8a, 0x00, 0x0a, 0x00, 0x54, 0x00, 0x45, 0x00, 0x4c, 0x00, 0x3a, 0x00, 0x31, 0x00,
		0x32, 0x00, 0x33, 0x00, 0x34, 0x00, 0x20, 0x00, 0x28, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff}
	buf := bytes.NewBuffer(bytedata)
	p, _, e := ReadAsSM(buf)
	if e != nil {
		t.Fatalf("encode failed: %s", e)
	}
	b := new(bytes.Buffer)
	p.PrintStack(b)
	t.Log(b.String())
}
